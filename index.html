<!DOCTYPE html>
<html ng-app="WebSlicer">
<head lang="en">
    <meta charset="UTF-8">
    <title>Web Slicer</title>

    <link rel="icon" type="image/png" href="img/logo22-plain.png"/>

    <!--libraries-->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-ui-router/release/angular-ui-router.js"></script>
    <script src="bower_components/angular-ui-bootstrap-complete/ui-bootstrap.js"></script>
    <script src="bower_components/angular-ui-bootstrap-complete/ui-bootstrap-tpls.js"></script>
    <script src="bower_components/anbomofo/anbomofo.min.js"></script>

    <!--css-->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-cosmo.css">
    <link rel="stylesheet" href="css/custom.css"/>

    <!-- MY SCRIPTS -->
    <script src="app.js"></script>

    <!--SETTINGS-->
    <script src="model/profile/settingsController.js"></script>
    <script src="model/profile/settingsItemDirective.js"></script>

    <!--OCTOPRINT-->
    <script src="model/octoprint/octoprintService.js"></script>
    <script src="model/octoprint/octoprintDirective.js"></script>
    <script src="model/octoprint/octoprintController.js"></script>


    <script src="deprecated.js"></script>

</head>
<body>

<div class="container" ng-controller="Deprecated">
    <div class="row">
        <div class="col-lg-6 col-lg-offset-3">
            <h1 class="title"><img src="img/logo22.svg" width="150px">{{title}}</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6 col-lg-offset-3">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>Login</h4>
                </div>
                <div class="panel-body">
                    <form>
                        <div class="form-group">
                            <label for="clientId">Client ID</label>
                            <input class="form-control" type="text" id="clientId" ng-model="clientId">
                            <button class="btn btn-warning" ng-click="generateClientId()">generate new id</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="row">

        <!--CONTROLS-->
        <div class="col-lg-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h4>Slicer Controls</h4>
                </div>
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked">

                        <!--file chooser-->
                        <li role="presentation">
                            <span class="btn btn-default btn-file">
                                Browse Files<input class="btn btn-file" type="file" file-model="myFile"/>
                            </span>
                        </li>
                        <li role="presentation">
                            <button class="btn btn-default" ng-click="uploadFile()">Upload Model</button>
                        </li>

                        <!--current file list-->
                        <li role="presentation">
                            <ul class="list-group">
                                <p> Current working model ID: {{modelFileId}}</p>
                                <li class="list-group-item" ng-click="changeWorkingFile(key)"
                                    ng-repeat="(key, value) in modelFiles">
                                    <p class="text-center">{{value}}</p>
                                </li>
                            </ul>
                        </li>

                        <li role="presentation">
                            <button class="btn btn-primary" ng-click="getFileList()">get files</button>
                        </li>

                        <!--settings-->
                        <li role="presentation">
                            <button class="btn btn-default" ng-click="importSettings()">Upload Settings</button>
                        </li>
                        <li role="presentation">
                            <button class="btn btn-primary" ng-click="slice(modelFileId)">
                                Slice...
                            </button>
                        </li>
                    </ul>

                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <octoprint></octoprint>
        </div>

    </div>

    <div class="row">
        <!--SETTINGS PANEL-->
        <div class="col-lg-6">
            <!--Table-->
            <table class="table table-hover table-condensed" ng-controller="SettingsController">
                <thead>
                <tr>
                    <th>layer height</th>
                    <th>wall thickness</th>
                    <th>retraction enable</th>
                </tr>
                </thead>
                <tbody>

                <!-- The existance of ng-model here means that the modal is an edit modal using customer as its data-->
                <tr modal ng-service="MyDataService" ng-model="settingItem">
                    <td>{{settingItem.layer_height}}</td>
                    <td>{{settingItem.wall_thickness}}</td>
                    <td>
                        <input type="checkbox" ng-model="settingItem.retraction_enable">
                    </td>
                </tr>

                </tbody>
            </table>

            <!--<div ng-controller="SettingsController">-->
            <!--<div class="panel panel-default">-->
            <!--<div class="panel-heading">-->
            <!--<h4>Printer Settings</h4>-->
            <!--</div>-->
            <!--<div class="panel-body">-->
            <!--<form>-->
            <!--&lt;!&ndash;TODO: overwrite ngmodel and allow directive to build settings model.&ndash;&gt;-->
            <!--<curasetting ng-repeat="setting in settings" content="setting"></curasetting>-->
            <!--</form>-->
            <!--</div>-->
            <!--</div>-->
            <!--</div>-->
        </div>
        <div class="col-lg-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>Gcode Output Window</h4>
                    <a ng-href="{{gcodeUrl}}" ng-click="downloadGcode(gcode.gcode)">download gcode</a>
                </div>
                <div class="panel-body">
                    <textarea cols="30" rows="100" ng-model="gcode.gcode" class="form-control"></textarea>
                </div>
            </div>
        </div>
    </div>

</div>

</body>
</html>